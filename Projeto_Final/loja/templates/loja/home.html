{% load static %}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universo Miau üêæ</title>
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
</head>
<body class="dark-mode">
    <!-- üîπ Barra Lateral de Categorias -->
    <nav class="menu-categorias">
        <a href="{% url 'home' %}">Todos</a>  <!-- Link para todos os produtos -->
        {% for categoria in categorias %}
            <a href="?categoria_id={{ categoria.id }}">{{ categoria.nome }}</a>  <!-- Link para filtrar por categoria -->
        {% endfor %}
    </nav>

    <!-- üîπ Conte√∫do Principal -->
    <div class="conteudo-principal">
        <!-- üîπ Cabe√ßalho -->
        <header class="topo">
            <div class="topo-conteudo">
                <div class="logo">üêæ Universo Miau</div>

                <div class="barra-pesquisa">
                    <input type="text" placeholder="Buscar produtos...">
                    <button>üîç</button>
                </div>

                <!-- Bot√£o de altern√¢ncia de tema -->
                <div class="toggle-tema">
                    <button id="btn-toggle-tema">
                        <span class="lua">üåô</span>
                        <span class="sol">üåû</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- üîπ Carrossel de Produtos em Destaque -->
        <section class="carrossel">
            <h2>üî• Promo√ß√µes em Destaque</h2>
            <div class="carrossel-container">
                {% for produto in produtos_em_promocao|slice:":5" %}
                <div class="carrossel-item">
                    {% if produto.imagem %}
                        <img src="{{ produto.imagem.url }}" alt="{{ produto.nome }}" class="img-fixada">
                    {% else %}
                        <img src="{% static 'img/produto-sem-imagem.jpg' %}" alt="Imagem n√£o dispon√≠vel" class="img-fixada">
                    {% endif %}
                    <p class="nome-produto">{{ produto.nome }}</p>
                    <div class="preco-container">
                        <span class="preco-antigo">R$ {{ produto.preco|floatformat:2 }}</span>
                        <span class="preco-novo">R$ {{ produto.preco_promocional|floatformat:2 }}</span>
                    </div>
                </div>
                {% empty %}
                <p>Nenhuma promo√ß√£o no momento.</p>
                {% endfor %}
            </div>
        </section>

        <!-- üîπ Vitrine de Produtos -->
        <main class="produtos">
            <h2>üê± Vitrine de Produtos</h2>
            <div class="grid-produtos">
                {% for produto in produtos %}
                <div class="produto-card">
                    {% if produto.imagem %}
                        <img src="{{ produto.imagem.url }}" alt="{{ produto.nome }}" class="img-fixada">
                    {% else %}
                        <img src="{% static 'img/produto-sem-imagem.jpg' %}" alt="Imagem n√£o dispon√≠vel" class="img-fixada">
                    {% endif %}
                    <div class="produto-info">
                        <h3>{{ produto.nome }}</h3>
                        <p class="descricao-curta">{{ produto.descricao|truncatechars:100 }}</p>
                        
                        <!-- Bot√£o de detalhes -->
                        <button class="btn-leia-mais"
                            data-descricao="{{ produto.descricao }}"
                            data-nome="{{ produto.nome }}"
                            data-preco="{% if produto.em_promocao and produto.preco_promocional %}{{ produto.preco_promocional|floatformat:2 }}{% else %}{{ produto.preco|floatformat:2 }}{% endif %}"
                            data-preco-original="{{ produto.preco|floatformat:2 }}"
                            data-em-promocao="{{ produto.em_promocao }}"
                            data-imagem="{% if produto.imagem %}{{ produto.imagem.url }}{% else %}{% static 'img/produto-sem-imagem.jpg' %}{% endif %}">
                            üìñ Leia Mais
                        </button>

                        <!-- Pre√ßos -->
                        <div class="preco-container">
                            {% if produto.em_promocao and produto.preco_promocional %}
                                <span class="preco-antigo">R$ {{ produto.preco|floatformat:2 }}</span>
                                <span class="preco-novo">R$ {{ produto.preco_promocional|floatformat:2 }}</span>
                            {% else %}
                                <span class="preco-normal">R$ {{ produto.preco|floatformat:2 }}</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% empty %}
                <p>Nenhum produto dispon√≠vel no momento.</p>
                {% endfor %}
            </div>
        </main>
    </div>

    <!-- üîπ Modal de Detalhes do Produto -->
    <div id="modal-produto" class="modal">
        <div class="modal-conteudo">
            <span class="fechar">&times;</span>
            <div class="modal-produto-container">
                <img id="modal-imagem" src="" alt="Produto" class="modal-imagem">
                <div class="modal-info">
                    <h2 id="modal-nome"></h2>
                    <p id="modal-descricao"></p>
                    <p class="preco-grande">
                        <span id="modal-preco-original" class="preco-antigo"></span>
                        <span id="modal-preco" class="preco-novo"></span>
                    </p>
                    <button class="btn-comprar">üõí Comprar Agora</button>
                </div>
            </div>
        </div>
    </div>

    <!-- üîπ Rodap√© -->
    <footer class="rodape">
        <div class="rodape-conteudo">
            <div>
                <h4>Universo Miau üêæ</h4>
                <p>Seu shopping felino em cinza, branco e chumbo.</p>
            </div>
            <div>
                <h4>Links</h4>
                <a href="#">Pol√≠tica de Privacidade</a>
                <a href="#">Contato</a>
                <a href="#">Sobre N√≥s</a>
            </div>
            <div>
                <h4>Siga-nos</h4>
                <a href="#">Instagram</a>
                <a href="#">Facebook</a>
            </div>
        </div>
        <p class="copy">¬© 2025 Universo Miau üêæ</p>
    </footer>

    <!-- JS -->
    <script src="{% static 'js/home.js' %}"></script>

    <script>
        // Fun√ß√£o para alternar entre os modos light e dark
        function toggleTema() {
            const body = document.body;
            body.classList.toggle('light-mode');
            body.classList.toggle('dark-mode');
        }
    </script>
</body>
</html>
